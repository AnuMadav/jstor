<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog â€¢ jstor</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Changelog" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">jstor</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Introduction.html">Introduction</a>
    </li>
    <li>
      <a href="../articles/automating_file_import.html">Automating File Import</a>
    </li>
    <li>
      <a href="../articles/known-quirks.html">Known Data Quirks</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/analysing-n-grams.html">Case Study - Analysing Ngrams</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/tklebel/jstor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/ropensci/jstor/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="jstor-0-3-1" class="section level1">
<h1 class="page-header">
<a href="#jstor-0-3-1" class="anchor"></a>jstor 0.3.1</h1>
<ul>
<li>
<code>jstor</code> is now part of rOpenSci.</li>
<li>removed arguments <code>new_col</code> for <code>jst_unify_journal_id</code> and <code>jst_add_total_pages</code>, since both built on the dev version of rlang. Once this version is on CRAN, they will be re-introduced.</li>
<li>fixed a few issues in README and man files regarding changes introduced with 0.3.0.</li>
</ul>
</div>
    <div id="jstor-0-3-0" class="section level1">
<h1 class="page-header">
<a href="#jstor-0-3-0" class="anchor"></a>jstor 0.3.0</h1>
<div id="breaking-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#breaking-changes" class="anchor"></a>Breaking changes</h2>
<p><code>jst_import</code> and <code>jst_import_zip</code> now use futures as a backend for parallel processing. This makes internals more compact and reduces dependencies. Furthermore this reduces the number of arguments, since the argument <code>cores</code> has been removed. By default, the functions run sequentially. If you want them to execute in parallel, use futures:</p>
<pre><code>library(future)
plan(multiprocess)

jst_import_zip("zip-archive.zip",
               import_spec = jst_define_import(article = jst_get_article),
               out_file = "outfile")</code></pre>
<p>If you want to terminate the proceses, at least on *nix-systems you need to kill them manually (once again).</p>
<ul>
<li>All functions have been renamed to use a unified naming scheme: <code>jst_*</code>. The former group of <code>find_*</code> functions is now called <code>jst_get_*</code>, as in <code><a href="../reference/jst_get_article.html">jst_get_article()</a></code>. The previous functions have been deprecated and will be removed before submission to CRAN.</li>
<li>The unique identifier for matching across files has been renamed to <code>file_name</code>, and the corresponding helper to get this file name from <code>get_basename</code> to <code>jst_get_file_name</code>.</li>
</ul>
</div>
<div id="importing-data-directly-from-zip-files" class="section level2">
<h2 class="hasAnchor">
<a href="#importing-data-directly-from-zip-files" class="anchor"></a>Importing data directly from zip-files</h2>
<p>There is a new set of functions which lets you directly import files from .zip-archives: <code><a href="../reference/jst_import.html">jst_import_zip()</a></code> and <code><a href="../reference/jst_define_import.html">jst_define_import()</a></code>.</p>
<p>In the following example, we have a zip-archive from DfR and want to import metadata on books and articles. For all articles we want to apply <code><a href="../reference/jst_get_article.html">jst_get_article()</a></code> and <code><a href="../reference/jst_get_authors.html">jst_get_authors()</a></code>, for books only <code><a href="../reference/jst_get_book.html">jst_get_book()</a></code>, and we want to read unigrams (ngram1).</p>
<p>First we specify what we want, and then we apply it to our zip-archive:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># specify definition</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">import_spec &lt;-<span class="st"> </span><span class="kw"><a href="../reference/jst_define_import.html">jst_define_import</a></span>(<span class="dt">article =</span> <span class="kw">c</span>(jst_get_article, jst_get_authors),</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">                                 <span class="dt">book =</span> jst_get_book,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">                                 <span class="dt">ngram1 =</span> jst_get_ngram)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5"></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co"># apply definition to archive</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="kw"><a href="../reference/jst_import.html">jst_import_zip</a></span>(<span class="st">"zip_archive.zip"</span>,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">               <span class="dt">import_spec =</span> import_spec,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">               <span class="dt">out_file =</span> <span class="st">"out_path"</span>)</a></code></pre></div>
<p>If the archive contains also research reports, pamphlets or other ngrams, they will not be imported. We could however change our specification, if we wanted to import all kinds of ngrams (given that we originally requested them from DfR):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># import multiple forms of ngrams</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">import_spec &lt;-<span class="st"> </span><span class="kw"><a href="../reference/jst_define_import.html">jst_define_import</a></span>(<span class="dt">article =</span> <span class="kw">c</span>(jst_get_article, jst_get_authors),</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">                                 <span class="dt">book =</span> jst_get_book,</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">                                 <span class="dt">ngram1 =</span> jst_get_ngram,</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">                                 <span class="dt">ngram2 =</span> jst_get_ngram,</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">                                 <span class="dt">ngram3 =</span> jst_get_ngram)</a></code></pre></div>
<p>Note however that for larger archives, importing all ngrams takes a very long time. It is thus advisable to only import ngrams for articles which you want to analyse, i.e.Â most likely a subset of the initial request. The new function <code><a href="../reference/jst_subset_ngrams.html">jst_subset_ngrams()</a></code> helps you with this (see also the section on importing bigrams in the <a href="https://ropensci.github.io/jstor/articles/analysing-n-grams.html#importing-bigrams">case study</a>.</p>
<p>Before importing all files from a zip-archive, you can get a quick overview with <code><a href="../reference/jst_preview_zip.html">jst_preview_zip()</a></code>.</p>
</div>
<div id="new-vignette" class="section level2">
<h2 class="hasAnchor">
<a href="#new-vignette" class="anchor"></a>New vignette</h2>
<p>The new <code><a href="../articles/known-quirks.html">vignette("known-quirks")</a></code> lists common problems with data from JSTOR/DfR. Contributions with further cases are welcome!</p>
</div>
<div id="new-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#new-functions" class="anchor"></a>New functions</h2>
<ul>
<li>New function <code><a href="../reference/jst_get_journal_overview.html">jst_get_journal_overview()</a></code> supplies a tibble with contextual information about the journals in JSTOR.</li>
<li>New function <code><a href="../reference/jst_combine_outputs.html">jst_combine_outputs()</a></code> applies <code><a href="../reference/jst_re_import.html">jst_re_import()</a></code> to a whole directory and lets you combine all related files in one go. It uses the file structure that <code><a href="../reference/jst_import.html">jst_import()</a></code> and <code><a href="../reference/jst_import.html">jst_import_zip()</a></code> provide as a heuristic: a filename with a dash and one or multiple digits at its end (<code>filename-1.csv</code>). All files with identical names (disregarding dash and digits) are combined into one file.</li>
<li>New function <code><a href="../reference/jst_re_import.html">jst_re_import()</a></code> lets you re_import a <code>.csv</code> file that <code><a href="../reference/jstor_import.html">jstor_import()</a></code> or <code><a href="../reference/jst_import.html">jst_import_zip()</a></code> had exported. It tries to guess the type of content based on the column names or, if column names are not available, from the number of columns, raising a warning if guessing fails and reverting to a generic import.</li>
<li>A new function <code><a href="../reference/jst_subset_ngrams.html">jst_subset_ngrams()</a></code> lets you create a subset of ngram files within a zip-file which you can import with <code><a href="../reference/jst_get_ngram.html">jst_get_ngram()</a></code>.</li>
<li>A new set of convenience functions for taking a few cleaning steps: <code><a href="../reference/jst_clean_page.html">jst_clean_page()</a></code> tries to turn a character vector with pages into a numeric one, <code><a href="../reference/jst_unify_journal_id.html">jst_unify_journal_id()</a></code> merges different specifications of journals into one, <code><a href="../reference/jst_add_total_pages.html">jst_add_total_pages()</a></code> adds a total count of pages per article, and <code><a href="../reference/jst_augment.html">jst_augment()</a></code> calls all three functions to clean the data set in one go.</li>
</ul>
</div>
<div id="minor-changes" class="section level2">
<h2 class="hasAnchor">
<a href="#minor-changes" class="anchor"></a>Minor changes</h2>
<ul>
<li>Improved documentation regarding endnotes (thanks <a href='http://github.com/elinw'>@elinw</a>)</li>
<li>jst_import and jst_import_zip have a new argument: <code>n_batches</code> which lets you specify the number of batches directly</li>
</ul>
</div>
</div>
    <div id="jstor-0-2-6" class="section level1">
<h1 class="page-header">
<a href="#jstor-0-2-6" class="anchor"></a>jstor 0.2.6</h1>
<ul>
<li>added lengthy case study at <a href="https://tklebel.github.io/jstor/articles/analysing-n-grams.html" class="uri">https://tklebel.github.io/jstor/articles/analysing-n-grams.html</a>
</li>
<li>added a pkgdown site at <a href="https://tklebel.github.io/jstor/" class="uri">https://tklebel.github.io/jstor/</a>
</li>
<li>changed implementation of parallel execution in <code>jstor_import</code> from <code><a href="http://www.rdocumentation.org/packages/parallel/topics/mclapply">parallel::mclapply</a></code> to <code><a href="http://www.rdocumentation.org/packages/foreach/topics/foreach">foreach::foreach</a></code> with <code>snow</code> as a backend for <code>%dopar%</code>.</li>
<li>added support for progress bars <a href='https://github.com/ropensci/jstor/issues/34'>#34</a></li>
<li>
<code>jstor_import</code> now writes column names by default <a href='https://github.com/ropensci/jstor/issues/29'>#29</a></li>
<li>new helper <code>get_basename</code> helps to get the basename of a file without its extension</li>
<li>
<code>find_article</code> does not coerce days and months to integer any more, since there might be information stored as text.</li>
<li>Added a <code>NEWS.md</code> file to track changes to the package.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
        <li><a href="#jstor-0-3-1">0.3.1</a></li>
        <li><a href="#jstor-0-3-0">0.3.0</a></li>
        <li><a href="#jstor-0-2-6">0.2.6</a></li>
      </ul>
    </div>
  </div>

</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://thomasklebel.eu'>Thomas Klebel</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

